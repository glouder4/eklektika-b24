{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Event, Loc, Reflection} from 'main.core';\nimport {EntityCard} from 'catalog.entity-card';\nimport {type BaseEvent, EventEmitter} from 'main.core.events';\n\nclass ProductCard extends EntityCard\n{\n\tconstructor(id, settings = {})\n\t{\n\t\tsuper(id, settings);\n\t}\n\n\tgetEntityType()\n\t{\n\t\treturn 'Product';\n\t}\n\n\tonSectionLayout(event: BaseEvent)\n\t{\n\t\tconst [, eventData] = event.getCompatData();\n\n\t\tif (eventData.id === 'catalog_parameters')\n\t\t{\n\t\t\teventData.visible = this.isSimpleProduct && this.isCardSettingEnabled('CATALOG_PARAMETERS');\n\t\t}\n\t}\n\n\tonGridUpdatedHandler(event: BaseEvent)\n\t{\n\t\tsuper.onGridUpdatedHandler(event);\n\n\t\tconst [grid] = event.getCompatData();\n\t\tif ((grid && grid.getId() === this.getVariationGridId()) && (grid.getRows().getCountDisplayed() <= 0))\n\t\t{\n\t\t\tdocument.location.reload();\n\t\t}\n\t}\n\n\tonEditorAjaxSubmit(event: BaseEvent)\n\t{\n\t\tsuper.onEditorAjaxSubmit(event);\n\n\t\tconst [, response] = event.getCompatData();\n\n\t\tif (response.data)\n\t\t{\n\t\t\tif (response.data.NOTIFY_ABOUT_NEW_VARIATION)\n\t\t\t{\n\t\t\t\tthis.showNotification(Loc.getMessage('CPD_NEW_VARIATION_ADDED'));\n\t\t\t}\n\t\t}\n\t}\n}\n\nReflection.namespace('BX.Catalog').ProductCard = ProductCard;"],"names":["ProductCard","id","settings","event","getCompatData","eventData","visible","isSimpleProduct","isCardSettingEnabled","grid","getId","getVariationGridId","getRows","getCountDisplayed","document","location","reload","response","data","NOTIFY_ABOUT_NEW_VARIATION","showNotification","Loc","getMessage","EntityCard","Reflection","namespace"],"mappings":";;;KAIMA;;;GAEL,qBAAYC,EAAZ,EACA;KAAA,IADgBC,QAChB,uEAD2B,EAC3B;KAAA;KAAA,wGACOD,EADP,EACWC,QADX;;;;;qCAKA;OACC,OAAO,SAAP;;;;qCAGeC,OAChB;OACC,2BAAsBA,KAAK,CAACC,aAAN,EAAtB;;WAASC,SAAT;;OAEA,IAAIA,SAAS,CAACJ,EAAV,KAAiB,oBAArB,EACA;SACCI,SAAS,CAACC,OAAV,GAAoB,KAAKC,eAAL,IAAwB,KAAKC,oBAAL,CAA0B,oBAA1B,CAA5C;;;;;0CAImBL,OACrB;OACC,8GAA2BA,KAA3B;;OAEA,4BAAeA,KAAK,CAACC,aAAN,EAAf;;WAAOK,IAAP;;OACA,IAAKA,IAAI,IAAIA,IAAI,CAACC,KAAL,OAAiB,KAAKC,kBAAL,EAA1B,IAAyDF,IAAI,CAACG,OAAL,GAAeC,iBAAf,MAAsC,CAAnG,EACA;SACCC,QAAQ,CAACC,QAAT,CAAkBC,MAAlB;;;;;wCAIiBb,OACnB;OACC,4GAAyBA,KAAzB;;OAEA,4BAAqBA,KAAK,CAACC,aAAN,EAArB;;WAASa,QAAT;;OAEA,IAAIA,QAAQ,CAACC,IAAb,EACA;SACC,IAAID,QAAQ,CAACC,IAAT,CAAcC,0BAAlB,EACA;WACC,KAAKC,gBAAL,CAAsBC,aAAG,CAACC,UAAJ,CAAe,yBAAf,CAAtB;;;;;;GA3CsBC;;AAiD1BC,qBAAU,CAACC,SAAX,CAAqB,YAArB,EAAmCzB,WAAnC,GAAiDA,WAAjD;;;;"}